---
let canvasId = "line-chart";
---

<canvas id={canvasId} aria-label="Sample Chart" role="img" class="bleed">
    <p>Your browser does not support the canvas element!</p>
</canvas>

<script>
    import Chart from "chart.js/auto";

    function generateMonths(count) {
        const months = [
            "January",
            "February",
            "March",
            "April",
            "May",
            "June",
            "July",
            "August",
            "September",
            "October",
            "November",
            "December",
        ];
        return months.slice(0, count);
    }

    function initChart() {
        const ctx = document.getElementById("line-chart");

        const data = {
            labels: generateMonths(7),
            datasets: [
                {
                    label: "Dataset 1",
                    data: [10, 20, 30, 25, 40, 35, 48],
                    borderColor: "red",
                    backgroundColor: "red",
                },
                {
                    label: "Dataset 2",
                    data: [5, 15, 10, 30, 20, 45, 40],
                    borderColor: "#ccc",
                    backgroundColor: "#ccc",
                },
            ],
        };

        const config = {
            type: "line",
            data: data,
            options: {
                responsive: true,
                interaction: {
                    mode: "index",
                    intersect: false,
                },
                stacked: false,
                plugins: {
                    legend: { position: "top" },
                    title: {
                        display: true,
                        text: "Example Line Chart",
                    },
                },
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: "Months",
                        },
                    },
                    y: {
                        title: {
                            display: true,
                            text: "Values",
                        },
                        max: 60,
                        ticks: {
                            stepSize: 20,
                        },
                    },
                },
            },
        };

        new Chart(ctx, config);
    }

    document.addEventListener("astro:page-load", initChart);
</script>
